<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Contacto | GrowShop</title>
    <meta name="description" content="Contacto GrowShop: Escríbenos para asesoría en sustratos, fertilizantes, iluminación y cultivo." />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
    <!-- Navbar dinámica -->
    <div id="navbar-placeholder"></div>

    <main class="pb-6">
        <section class="container py-6">
                <div class="mb-5 text-center">
                    <h1 class="section-title mb-2">Hablemos</h1>
                    <p class="text-secondary mb-0">Asesoría personalizada para potenciar tu cultivo. Escríbenos y te respondemos a la brevedad.</p>
                </div>
            <div class="row g-5">
                <!-- Info de contacto -->
                <div class="col-lg-5 d-flex flex-column gap-4">
                    <div class="feature-card glass h-100">
                        <h5 class="fw-semibold mb-3">Datos de Contacto</h5>
                        <ul class="list-unstyled small mb-0 d-flex flex-column gap-3">
                            <li class="d-flex gap-3">
                                <div class="icon-gradient" style="font-size:1.5rem; width:2.8rem; height:2.8rem;"><i class="bi bi-geo-alt"></i></div>
                                <div>
                                    <div class="fw-semibold">Ubicación</div>
                                    <div class="text-secondary">Envíos a todo el país (bodega central)</div>
                                </div>
                            </li>
                            <li class="d-flex gap-3">
                                <div class="icon-gradient" style="font-size:1.5rem; width:2.8rem; height:2.8rem;"><i class="bi bi-envelope"></i></div>
                                <div>
                                    <div class="fw-semibold">Correo</div>
                                    <a href="mailto:contacto@growshop.test" class="link-gradient small fw-semibold">contacto@growshop.test</a>
                                </div>
                            </li>
                            <li class="d-flex gap-3">
                                <div class="icon-gradient" style="font-size:1.5rem; width:2.8rem; height:2.8rem;"><i class="bi bi-phone"></i></div>
                                <div>
                                    <div class="fw-semibold">Teléfono / WhatsApp</div>
                                    <a href="https://wa.me/34600000000" target="_blank" class="link-gradient small fw-semibold">+34 600 000 000</a>
                                </div>
                            </li>
                            <li class="d-flex gap-3">
                                <div class="icon-gradient" style="font-size:1.5rem; width:2.8rem; height:2.8rem;"><i class="bi bi-clock"></i></div>
                                <div>
                                    <div class="fw-semibold">Horario</div>
                                    <div class="text-secondary">Lun - Vie: 9:00 a 18:30 • Sáb: 10:00 a 14:00</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="feature-card glass">
                        <h6 class="fw-semibold mb-3">Atajos</h6>
                        <div class="d-grid gap-2">
                            <a class="btn btn-gradient btn-sm" href="shop.html">Ir a la Tienda</a>
                            <a class="btn btn-outline-light btn-sm" href="index.html#destacados">Ver Destacados</a>
                            <a class="btn btn-outline-light btn-sm" href="https://wa.me/34600000000" target="_blank"><i class="bi bi-whatsapp me-1"></i> WhatsApp</a>
                        </div>
                    </div>
                </div>

                <!-- Formulario -->
                <div class="col-lg-7">
                    <div class="glass p-4 p-md-5 rounded-4 h-100">
                        <h2 class="h4 fw-semibold mb-4">Envíanos un Mensaje</h2>
                        <form id="contactForm" novalidate class="contact-form">
                                            <div class="mb-3">
                                                <label for="name" class="form-label small fw-semibold">Nombre</label>
                                                <input type="text" class="form-control gs-input" id="name" name="name" placeholder="Tu nombre" required minlength="2" />
                                            </div>
                                            <div class="mb-3">
                                                <label for="email" class="form-label small fw-semibold">Correo Electrónico</label>
                                                <input type="email" class="form-control gs-input" id="email" name="email" placeholder="tu@email.com" required />
                                            </div>
                                            <div class="mb-3">
                                                <label for="message" class="form-label small fw-semibold">Mensaje</label>
                                                <textarea id="message" class="form-control gs-input" name="message" rows="5" placeholder="Cuéntanos qué necesitas..." required minlength="10"></textarea>
                                            </div>
                                            <div class="mb-3">
                                                <label for="topic" class="form-label small fw-semibold">Tema</label>
                                                <select id="topic" name="topic" class="form-select gs-input" required>
                                    <option value="" selected disabled>Selecciona</option>
                                    <option value="asesoria">Asesoría cultivo</option>
                                    <option value="pedido">Estado de pedido</option>
                                    <option value="producto">Consulta de producto</option>
                                    <option value="otro">Otro</option>
                                </select>
                            </div>
                            <div class="d-flex flex-column flex-sm-row gap-3 align-items-sm-center justify-content-between mb-3">
                                <div class="form-check m-0 small text-secondary">
                                    <input class="form-check-input" type="checkbox" value="1" id="privacyCheck" required>
                                    <label class="form-check-label" for="privacyCheck">Acepto el tratamiento de datos.</label>
                                </div>
                                <button type="submit" class="btn btn-gradient px-4 fw-semibold">Enviar Mensaje</button>
                            </div>
                            <div id="errorMessage" class="alert alert-danger py-2 px-3 small d-none"></div>
                            <div id="successMessage" class="alert alert-success py-2 px-3 small d-none">Mensaje enviado (demo). Te responderemos pronto.</div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer dinámico -->
    <div id="footer-placeholder"></div>

    <!-- Offcanvas Carrito (reutilizado para consistencia) -->
    <div class="offcanvas offcanvas-end cart-panel text-white" tabindex="-1" id="cartCanvas">
        <div class="offcanvas-header border-bottom border-opacity-10">
            <h5 class="offcanvas-title">Carrito</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body d-flex flex-column p-0">
            <div id="cartItems" class="cart-items flex-grow-1"></div>
            <div class="p-3 border-top border-opacity-10">
                <div class="d-flex justify-content-between small mb-1">
                    <span>Subtotal</span><span id="cartSubtotal">$0</span>
                </div>
                <div class="d-flex justify-content-between small mb-1">
                    <span>IVA (19%)</span><span id="cartTax">$0</span>
                </div>
                <div class="d-flex justify-content-between fw-semibold mb-3">
                    <span>Total</span><span id="cartTotal">$0</span>
                </div>
                <div class="d-grid gap-2">
                    <button id="whatsappBtn" class="btn btn-gradient btn-sm">Enviar por WhatsApp</button>
                    <button id="checkoutBtn" class="btn btn-outline-light btn-sm">Pasarela (Demo)</button>
                    <button id="clearCartBtn" class="btn btn-outline-danger btn-sm">Vaciar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón flotante carrito -->
    <button class="cart-fab btn btn-gradient shadow" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartCanvas" aria-label="Ver carrito">
        <span class="position-relative">
            <i class="bi bi-bag"></i>
            <span id="cartCountBadge" class="badge bg-danger position-absolute top-0 start-100 translate-middle p-1 d-none"></span>
        </span>
    </button>

    <!-- Modal Pasarela Demo -->
    <div class="modal fade" id="paymentModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark-alt text-white border border-opacity-25">
                <div class="modal-header">
                    <h5 class="modal-title">Pasarela (Demo)</h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body small">
                    <p>Resumen actual del carrito:</p>
                    <ul id="paymentSummary" class="list-unstyled mb-3"></ul>
                    <div class="d-flex justify-content-between fw-semibold">
                        <span>Total:</span><span id="paymentTotal"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline-light btn-sm" data-bs-dismiss="modal">Cerrar</button>
                    <button class="btn btn-gradient btn-sm">Pagar (Simulado)</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/validation.js"></script>
    <script src="assets/js/cart.js"></script>
    <script>
        // Carga dinámica de navbar y footer
        Promise.all([
            fetch("components/navbar.html").then(r=>r.text()),
            fetch("components/footer.html").then(r=>r.text())
        ]).then(([nav, foot])=>{
            document.getElementById('navbar-placeholder').innerHTML = nav;
            document.getElementById('footer-placeholder').innerHTML = foot;
        });

        // Observador para animaciones reveal (repetimos lógica mínima de main.js sin cargarlo completo)
        const observer = new IntersectionObserver((entries)=>{
            entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); observer.unobserve(e.target);} });
        },{threshold:.25});
        document.querySelectorAll('.reveal').forEach(el=>observer.observe(el));

        // Navbar efecto scroll si existe
        document.addEventListener('scroll', ()=>{
            const nav = document.querySelector('.gs-navbar');
            if(!nav) return; window.scrollY > 40 ? nav.classList.add('scrolled') : nav.classList.remove('scrolled');
        });

        // Interceptar envío para mostrar mensaje de éxito sin recargar
        document.addEventListener('DOMContentLoaded', ()=>{
            const form = document.getElementById('contactForm');
            const errorBox = document.getElementById('errorMessage');
            const successBox = document.getElementById('successMessage');
            if(!form) return;
            form.addEventListener('submit', (e)=>{
                // validation.js previene envío si hay errores
                if(errorBox && errorBox.style.display === 'block') return; // hay errores
                e.preventDefault();
                if(successBox){
                    successBox.classList.remove('d-none');
                    successBox.focus();
                }
                form.reset();
            });
        });
    </script>
</body>
</html>